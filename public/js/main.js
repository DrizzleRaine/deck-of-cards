!function(){'use strict';var b=35,c=46,d=0,e=1,f=2,g=function(a){var g=null,h=null,i=null,j=d,k=0;for(var l=0;l<=a.length;l++){var m=a.charCodeAt(l),n=m===b,o=m===c,p=!m;(n||o||p)&&(j===d?(l===0?(g='div'):(g=a.substring(k,l))):j===e?(h=a.substring(k,l)):i?(i+=' '+a.substring(k,l)):(i=a.substring(k,l)),n?(j=e):o&&(j=f),k=l+1)}return{tag:g,id:h,className:i}},h=function(a,b){var c=g(a),d=c.tag,e=c.id,f=c.className,h=b?document.createElementNS(b,d):document.createElement(d);e&&(h.id=e);f&&(b?h.setAttribute('class',f):(h.className=f));return h},j=function(a,b){var c=D(a),d=D(b);b===d&&d.__redom_view&&(b=d.__redom_view);d.parentNode&&(k(b,d,c),c.removeChild(d));return b},k=function(a,b,c){var d=b.__redom_lifecycle;if(l(d)){b.__redom_mounted=!1;return}var e=c;b.__redom_mounted&&q(b,'onunmount');while(e){var f=e.__redom_lifecycle||{};for(var g in d)f[g]&&(f[g]-=d[g]);l(f)&&(e.__redom_lifecycle=null);e=e.parentNode}},l=function(a){if(a==null){return !0}for(var b in a){if(a[b]){return !1}}return !0},m=['onmount','onremount','onunmount'],n=typeof window!=='undefined'&&'ShadowRoot' in window,o=function(a,b,c,d){var e=D(a),f=D(b);b===f&&f.__redom_view&&(b=f.__redom_view);b!==f&&(f.__redom_view=b);var g=f.__redom_mounted,h=f.parentNode;g&&h!==e&&k(b,f,h);c!=null?(d?e.replaceChild(f,D(c)):e.insertBefore(f,D(c))):e.appendChild(f);p(b,f,e,h);return b},p=function(a,b,c,d){var e=b.__redom_lifecycle||(b.__redom_lifecycle={}),f=c===d,g=!1;for(var h=0,i=m;h<i.length;h+=1){var j=i[h];f||(a!==b&&(j in a&&(e[j]=(e[j]||0)+1)));e[j]&&(g=!0)}if(!g){b.__redom_mounted=!0;return}var k=c,l=!1;(f||k&&k.__redom_mounted)&&(q(b,f?'onremount':'onmount'),l=!0);while(k){var o=k.parentNode,p=k.__redom_lifecycle||(k.__redom_lifecycle={});for(var r in e)p[r]=(p[r]||0)+e[r];if(l){break}else (k===document||n&&k instanceof window.ShadowRoot||o&&o.__redom_mounted)&&(q(k,f?'onremount':'onmount'),l=!0),k=o}},q=function(a,b){b==='onmount'||b==='onremount'?(a.__redom_mounted=!0):b==='onunmount'&&(a.__redom_mounted=!1);var c=a.__redom_lifecycle;if(!c){return}var d=a.__redom_view,e=0;d&&d[b]&&d[b]();for(var f in c)f&&e++;if(e){var g=a.firstChild;while(g){var h=g.nextSibling;q(g,b);g=h}}},r=function(a,b,c){var d=D(a);if(c!==undefined)d.style[b]=c;else if(E(b))d.setAttribute('style',b);else{for(var e in b)r(d,e,b[e])}},s='http://www.w3.org/1999/xlink',u=function(a,b,c){var d=D(a),e=d instanceof SVGElement;if(c!==undefined){if(b==='style')r(d,c);else if(e&&F(c))d[b]=c;else if(b==='dataset')w(d,c);else if(!e&&(b in d||F(c)))d[b]=c;else{if(e&&b==='xlink'){v(d,c);return}d.setAttribute(b,c)}}else{for(var f in b)u(d,f,b[f])}};function v(a,b){for(var c in b)a.setAttributeNS(s,c,b[c])}function w(a,b){for(var c in b)a.dataset[c]=b[c]}var A=function(a){return document.createTextNode(a!=null?a:'')},B=function(a,b){for(var c=0,d=b;c<d.length;c+=1){var e=d[c];if(e!==0&&!e){continue}var f=typeof e;f==='function'?e(a):f==='string'||f==='number'?a.appendChild(A(e)):G(D(e))?o(a,e):e.length?B(a,e):f==='object'&&u(a,e)}},C=function(a){return E(a)?J(a):D(a)},D=function(a){return a.nodeType&&a||!a.el&&a||D(a.el)},E=function(a){return typeof a==='string'},F=function(a){return typeof a==='function'},G=function(a){return a&&a.nodeType},H={},I=function(a){return H[a]||(H[a]=h(a))},J=function(a){var b=[],c=arguments.length-1;while(c-->0)b[c]=arguments[c+1];var d;if(E(a))d=I(a).cloneNode(!1);else if(G(a))d=a.cloneNode(!1);else if(F(a)){var e=a;d=new (Function.prototype.bind.apply(e,[null].concat(b)))()}else{throw new Error('At least one argument required')};B(D(d),b);return d};J.extend=function(a){var b=[],c=arguments.length-1;while(c-->0)b[c]=arguments[c+1];var d=I(a);return J.bind.apply(J,[this,d].concat(b))};var K=J,L=function(a){var b=[],c=arguments.length-1;while(c-->0)b[c]=arguments[c+1];var d=D(a),e=M(a,b,d.firstChild);while(e){var f=e.nextSibling;j(a,e);e=f}};function M(a,b,c){var d=c,e=new Array(b.length);for(var f=0;f<b.length;f++)e[f]=b[f]&&D(b[f]);for(var g=0;g<b.length;g++){var h=b[g];if(!h){continue}var i=e[g];if(i===d){d=d.nextSibling;continue}if(G(i)){var j=d&&d.nextSibling,k=h.__redom_index!=null,l=k&&j===e[g+1];o(a,h,d,l);l&&(d=j);continue}h.length!=null&&(d=M(a,h,d))}return d}var N=function(a){return function(b){return b[a]}},O=function d(a,b,c){this.View=a;this.initData=c;this.oldLookup={};this.lookup={};this.oldViews=[];this.views=[];b!=null&&(this.lookup={},this.key=F(b)?b:N(b))};O.prototype.update=function c(a,b){var d=this,e=d.View,f=d.key,g=d.initData,h=f!=null,i=this.lookup,j={},k=new Array(a.length),l=this.views;for(var m=0;m<a.length;m++){var n=a[m],o=void 0;if(h){var p=f(n);o=i[p]||new e(g,n,m,a);j[p]=o;o.__redom_id=p}else o=l[m]||new e(g,n,m,a);o.update&&o.update(n,m,a,b);var q=D(o.el);q.__redom_view=o;k[m]=o}this.oldViews=l;this.views=k;this.oldLookup=i;this.lookup=j};var P=function(a,b,c,d){return new Q(a,b,c,d)},Q=function e(a,b,c,d){this.__redom_list=!0;this.View=b;this.initData=d;this.views=[];this.pool=new O(b,c,d);this.el=C(a);this.keySet=c!=null};Q.prototype.update=function c(a,b){var d=this;a===void 0&&(a=[]);var e=this,f=e.keySet,g=this.views;this.pool.update(a,b);var h=this.pool,i=h.views,k=h.lookup;if(f){for(var l=0;l<g.length;l++){var m=g[l],n=m.__redom_id;k[n]==null&&(m.__redom_index=null,j(d,m))}}for(var o=0;o<i.length;o++){var p=i[o];p.__redom_index=o}L(this,i);f&&(this.lookup=k);this.views=i};Q.extend=function(a,b,c,d){return Q.bind(Q,a,b,c,d)};P.extend=Q.extend;class R{constructor(){this.el=K('.scene')}append(a){o(this.el,a.el)}}let S=a=>b=>Math.pow(b,a),T=a=>b=>1-Math.abs(Math.pow(b-1,a)),U=a=>b=>b<0.5?S(a)(b*2)/2:T(a)(b*2-1)/2+0.5,V=a=>a,W=S(2),X=T(2),Y=U(2),Z=S(3),_=T(3),$=U(3),aa=S(4),ab=T(4),ac=U(4),ad=S(5),ae=T(5),af=U(5),ag=a=>1+Math.sin(Math.PI/2*a-Math.PI/2),ah=a=>Math.sin(Math.PI/2*a),ai=a=>(1+Math.sin(Math.PI*a-Math.PI/2))/2,aj=a=>{let b=7.5625,c=2.75;if(a<1/c){return b*a*a}if(a<2/c){a-=1.5/c;return b*a*a+0.75}if(a<2.5/c){a-=2.25/c;return b*a*a+0.9375}a-=2.625/c;return b*a*a+0.984375},ak=a=>1-aj(1-a),al=a=>a<0.5?ak(a*2)*0.5:aj(a*2-1)*0.5+0.5;var am={linear:V,quadIn:W,quadOut:X,quadInOut:Y,cubicIn:Z,cubicOut:_,cubicInOut:$,quartIn:aa,quartOut:ab,quartInOut:ac,quintIn:ad,quintOut:ae,quintInOut:af,sineIn:ag,sineOut:ah,sineInOut:ai,bounceIn:ak,bounceOut:aj,bounceInOut:al};let{requestAnimationFrame:an}=window,ao=[],ap=1,aq=()=>{if(!ao.length){return}let a=Date.now();for(let b=0;b<ao.length;b++){let c=ao[b],{start:d,end:e,duration:f,easing:g,props:h}=c,{current:i}=h;if(a<d){continue}let j=a>e?1:(a-d)/f;c.tick(g(j));j===1&&ao.splice(b--,1);c.handler&&c.handler(i,j)}ao.length&&an(aq)};var ar=(({from:a,to:b,easing:c,duration:d,delay:e = 0},f)=>{let g=Date.now(),h=g+e*ap,i=h+d*ap;ao.length||an(aq);ao.push(new as({from:a,to:b,start:h,end:i,duration:d,easing:c,handler:f}))});class as{constructor({from:a,to:b,start:c,end:d,duration:e,easing:f,handler:g}){this.from=a;this.to=b;this.start=c;this.end=d;this.duration=e*ap;this.easing=am[f||'quadOut'];this.handler=g;this.started=!1;this.props={from:{},to:{},current:{},delta:{}}}parseProps(){let{from:a,to:b,props:c}=this;for(const d in a){if(d in b){let e=a[d],f=b[d];typeof e==='function'?(c.from[d]=e()):(c.from[d]=e);typeof f==='function'?(c.to[d]=f()):(c.to[d]=f);c.delta[d]=c.to[d]-c.from[d]}}}tick(a){let{started:b,props:c}=this,{current:d,to:e,delta:f}=c;b||this.parseProps();for(const b in e)d[b]=e[b]-f[b]*(1-a)}}let at='spade heart club diamond'.split(' '),au='A 2 3 4 5 6 7 8 9 10 J Q K'.split(' '),av=[[[0,0]],[[0,-1],[0,1,!0]],[[0,-1],[0,0],[0,1,!0]],[[-1,-1],[1,-1],[-1,1,!0],[1,1,!0]],[[-1,-1],[1,-1],[0,0],[-1,1,!0],[1,1,!0]],[[-1,-1],[1,-1],[-1,0],[1,0],[-1,1,!0],[1,1,!0]],[[-1,-1],[1,-1],[0,-0.5],[-1,0],[1,0],[-1,1,!0],[1,1,!0]],[[-1,-1],[1,-1],[0,-0.5],[-1,0],[1,0],[0,-0.5],[-1,1,!0],[1,1,!0]],[[-1,-1],[1,-1],[-1,-0.3333333333333333],[1,-0.3333333333333333],[0,0],[-1,0.3333333333333333,!0],[1,0.3333333333333333,!0],[-1,1,!0],[1,1,!0]],[[-1,-1],[1,-1],[0,-0.6666666666666666],[-1,-0.3333333333333333],[1,-0.3333333333333333],[-1,0.3333333333333333,!0],[1,0.3333333333333333,!0],[0,0.6666666666666666,!0],[-1,1,!0],[1,1,!0]],[[0,0]],[[0,0]],[[0,0]]];class aw{constructor(a){this.el=K('.card',this.container=K('.card-container',this.front=K(".card-front",this.suits=P('.card-suits',ax),K('.card-tl',this.rank1=K('.card-rank'),this.suit1=K('.card-suit')),K('.card-br',this.rank2=K('.card-rank'),this.suit2=K('.card-suit'))),this.back=K('.card-back',this.backTexture=K('.card-back-texture'))));this.setIndex(a%52);this.side='front'}setIndex(a){if(a==null){this.front.className='card-front';this.suits.update([]);this.rank1.textContent='';this.rank2.textContent='';this.suit1.textContent='';this.suit2.textContent='';return}this.index=a;let b=Math.floor(a/13)%4,c=a%13,d=Math.floor(a/13)%2?'red':'black',e=c===0,f=c>9;d==='red'?(this.front.classList.add('red'),this.front.classList.remove('black')):(this.front.classList.add('black'),this.front.classList.remove('red'));this.value=c+1;this.suits.update(av[c],{suit:b,value:c,color:d,ace:e,royal:f});this.rank1.textContent=au[c];this.rank2.textContent=au[c];this.suit1.style.backgroundImage=`url(img/${at[b]}.svg)`;this.suit2.style.backgroundImage=`url(img/${at[b]}.svg)`}set({x:a = this.x,y:b = this.y,z:c = this.z}){this.x=a;this.y=b;this.z=c;this._set({x:a,y:b,z:c})}_set({x:a = this.x,y:b = this.y,z:c = this.z}){this.el.style.transform=`translate(${a*5-c/52}em, ${b*7-c/52}em)`}animateTo({x:a,y:b,z:c,delay:d = 0,duration:e = 200,easing:f = 'quartInOut'},g,h){ar({from:{x:a,y:b,z:c},to:{x:a,y:b,z:c},delay:d,duration:e,easing:f},({x:a,y:b,z:c},d)=>{this.set({x:a,y:b,z:c});h&&h(d);g&&d===1&&g()})}get side(){return this._side}set side(a){if(a===this._side){return}a==='front'?(this.back.style.display='none',o(this.container,this.front)):(j(this.container,this.front),this.back.style.display='');this._side=a}flipTo(a,{side:b,delay:c = 0}){return new Promise(async d=>{if(this.side===b){return}let e=this.y;await new Promise(a=>{ar({from:{y:e},to:{y:e+1},delay:c,duration:150,easing:'cubicInOut'},({y:b},c)=>{this.set({y:b});c===1&&a()})});a.push(this);this.set({y:e+1});await new Promise(a=>{ar({from:{y:e+1},to:{y:e},duration:150,easing:'cubicInOut'},({y:c},d)=>{this.set({y:c});d>0.45&&(this.side!==b&&(this.side=b));d===1&&a()})});this.side=b;d()})}dealTo(a,{side:b,delay:c,index:d = this.parent.cards.indexOf(this)}){return this.parent.dealTo(a,{side:b,delay:c,index:d})}}aw.create=(a,b)=>{return new aw(a,b)};class ax{constructor(){this.el=K('.card-suit')}update(a,b,c,{value:d,suit:e,ace:f,royal:g}){g?(this.el.textContent=au[d],this.el.style.backgroundImage=''):(this.el.textContent='',this.el.style.backgroundImage=`url(img/${at[e]}.svg)`);this.el.className=f?'card-suit ace':g?'card-suit royal':'card-suit';this.el.style.left=`${a[0]*100}%`;this.el.style.top=`${a[1]*100}%`;this.el.style.transform=`translate(-50%, -50%) rotate(${!!a[2]*180}deg)`;this.el.style.fontWeight=g?'300':''}}var ay=(a=>{for(let b=a.length-1;b;b--){let c=Math.random()*b|0,d=a[b];a[b]=a[c];a[c]=d}return a}),az=(async(a,b)=>{await aA(a);await aA(a);await aA(a)});let aA=a=>{let b=a.cards.map(a=>a.index);ay(b);return new Promise(async(c,d)=>{let e=[],f=[];while(a.cards.length){let b=a.cards.shift();Math.random()>0.5?e.push(b):f.push(b)}let g=[];while(e.length||f.length){let b={x:0.4+Math.random()*0.3},c;e[0]&&f[0]?(Math.random()>0.5?(c=e.shift(),b.x*=-1):(c=f.shift())):e[0]?(c=e.shift(),b.x*=-1):f[0]&&(c=f.shift());a.cards.push(c);g.push({card:c,to:b})}g.forEach(async({card:d,to:e},f)=>{let{x:h}=e;ar({delay:f/g.length*175,duration:275,from:{z:d.z},to:{z:f},easing:'linear'},({z:a},c)=>{d.z=a;c===1&&d.setIndex(b[f])});await new Promise(b=>{ar({delay:f/g.length*175,duration:175,easing:'cubicOut',from:{x:d.x},to:{x:h}},({x:c},e)=>{d.set({x:c});if(e===1){if(f===0){let b=a.el.firstChild;d.el!==b.previousSibling&&a.el.insertBefore(d.el,b)}else{let b=g[f-1].card.el.nextSibling;b?(b.previousSibling!==d.el&&a.el.insertBefore(d.el,b)):a.el.appendChild(d.el)}b()}})});ar({delay:0,duration:200,easing:'cubicInOut',from:{x:d.x},to:{x:0}},({x:a},b)=>{d.set({x:a});b===1&&(f===g.length-1&&c())})})})};var aB=(async(a,b,c,{side:d,duration:e = 300,delay:f = 0},g)=>{let h={x:b.x,y:b.y,z:b.z},i=c.getPosition(c.cards.length),j={x:h.x-i.x,y:h.y-i.y,z:h.z-i.z},k={x:a.x-c.x,y:a.y-c.y,z:a.z-c.z},l={x:b.x-k.x/2-j.x/2,y:b.y-k.y/2-j.y/2};await new Promise(a=>{ar({from:{x:b.x,y:b.y},to:l,easing:'quartIn',delay:f,duration:e/2},({x:c,y:d},e)=>{b.set({x:c,y:d});e===1&&a()})});a.remove(b);c.push(b);let m={x:b.x+k.x/2+j.x/2,y:b.y+k.y/2+j.y/2,z:b.z+k.z+j.z};b._set(m);ar({from:m,to:{z:b.z},delay:0,duration:e/2,easing:'quadIn'},({z:a})=>{b.z=a});await new Promise(a=>{ar({from:m,to:{x:b.x,y:b.y},delay:0,duration:e/2,easing:'quartOut'},({x:c,y:e},f)=>{b.set({x:c,y:e});f>0.55&&(d&&b.side!==d&&(b.side=d));f===1&&(g&&g(),a())})})});class aC{constructor({x:a = 0,y:b = 0,z:c = 0} = {}){this.el=K('.deck');this.cards=[];this.generate(52);this.set({x:a,y:b,z:c})}set({x:a = this.x,y:b = this.y,z:c = this.z}){this.x=a;this.y=b;this.z=c;this.el.style.transform=`translate(${a*5-c/52}em, ${b*7-c/52}em)`}animateTo({x:a = this.x,y:b = this.y,z:c = this.z,delay:d = 0,duration:e = 400,easing:f = 'cubicInOut'},g,h){return new Promise(i=>{ar({from:{x:this.x,y:this.y,z:this.z},to:{x:a,y:b,z:c},delay:d,duration:e,easing:f},({x:a,y:b,z:c},d)=>{this.set({x:a,y:b,z:c});h&&h(d);d===1&&(g&&g(),i())})})}generate(a){for(let b=0;b<a;b++){let c=new aw(a-1-b);this.push(c)}}getPosition(a){let b=0,c=0,d=a;return{x:b,y:c,z:d}}remove(a){for(let b=0;b<this.cards.length;b++)this.cards[b]===a&&this.cards.splice(b--,1)}push(a){a.parent&&a.parent.remove(a);this.cards.push(a);a.parent=this;this.el.appendChild(a.el);for(let a=0;a<this.cards.length;a++){let{x:b,y:c,z:d}=this.getPosition(a);this.cards[a].set({x:b,y:c,z:d})}}shuffle(){return az(this)}dealTo(a,{side:b,delay:c = 0,index:d = this.cards.length-1,moveDeck:e = !1} = {},f){return new Promise(async g=>{e&&(await this.animateTo({x:a.x+(a.rotate?-1:1)*a.cards.length*a.spread,y:a.y+1,duration:250,delay:c}));await aB(this,this.cards[d],a,{duration:200,side:b,delay:e?0:c},f);g()})}}class aD{constructor({x:a = 0,y:b = 0,z:c = 0,rotate:d = !1,spread:e = 0.16666666666666666} = {}){this.el=K('.hand');this.cards=[];this.rotate=d;this.spread=e;this.set({x:a,y:b,z:c})}set({x:a = this.x,y:b = this.y,z:c = this.z,r:d = this.r}){this.x=a;this.y=b;this.z=c;this.el.style.transform=`translate(${a*5-c/52}em, ${b*7-c/52}em)`}animateTo({x:a = this.x,y:b = this.y,z:c = this.z,delay:d = 0,duration:e = 500,easing:f = 'quartInOut'},g){return new Promise(h=>{ar({from:{x:this.x,y:this.y,z:this.z},to:{x:a,y:b,z:c},delay:d,duration:e,easing:f},({x:a,y:b,z:c},d)=>{this.set({x:a,y:b,z:c});g&&g(d);d===1&&h()})})}getPosition(a){let b=(this.rotate?-1:1)*a*this.spread,c=0,d=a;return{x:b,y:c,z:d}}remove(a){for(let b=0;b<this.cards.length;b++)this.cards[b]===a&&this.cards.splice(b--,1)}push(a){a.parent&&a.parent.remove(a);this.cards.push(a);this.el.appendChild(a.el);a.parent=this;for(let a=0;a<this.cards.length;a++){let{x:b,y:c,z:d}=this.getPosition(a);this.cards[a].set({x:b,y:c,z:d})}}dealTo(a,{side:b,delay:c = 0,index:d = this.cards.length-1,moveDeck:e = !1} = {},f){return new Promise(async g=>{e&&(await this.animateTo({x:a.x+(a.rotate?-1:1)*a.cards.length*a.spread,y:a.y+1,duration:250,delay:c}));await aB(this,this.cards[d],a,{duration:250,side:b,delay:e?0:c},f);g()})}flip(a,b,{side:c,delay:d = 0},e){return this.cards[a].flipTo(b,{side:c,delay:d},e)}}var aE=(a=>{return new Promise(b=>{a.cards.forEach((c,d)=>{c.el.style.opacity=0;ar({delay:300+d/a.cards.length*750,duration:400,from:{opacity:0,y:-2,x:0},to:{opacity:1,y:0,x:0},easing:'cubicInOut'},({x:e,y:f,opacity:g},h)=>{c.el.style.opacity=g===1?'':g;c.set({x:e,y:f});h>0.55&&(c.side==='front'&&(c.side='back'));h===1&&(d===a.cards.length-1&&b())})})})});let aF=new R(),aG=new aD({x:-2.25,spread:1.125}),aH=new aD({y:-1.5,x:0,rotate:!0,spread:1.125}),aI=new aD({y:-1.5,x:0,rotate:!0,spread:1.125}),aJ=new aD({y:1.5,x:0,spread:1.125}),aK=new aC();o(aF,aG);o(aF,aH);o(aF,aI);o(aF,aJ);o(aF,aK);o(document.body,aF);let aL=async()=>{await aK.shuffle();await aK.dealTo(aH,{side:'back',moveDeck:!0});await aK.dealTo(aJ,{side:'front',moveDeck:!0});await aK.dealTo(aH,{side:'back',moveDeck:!0});await aK.dealTo(aJ,{side:'front',moveDeck:!0});await aK.dealTo(aG,{side:'front',moveDeck:!0});await aK.dealTo(aG,{side:'front',moveDeck:!0});await aK.dealTo(aG,{side:'front',moveDeck:!0});await aK.animateTo({x:-3.5,y:0});await aK.dealTo(aG,{side:'front',delay:1000,moveDeck:!0});await aK.animateTo({x:-3.5,y:0});await aK.dealTo(aG,{side:'front',delay:1000,moveDeck:!0});await aK.animateTo({x:-3.5,y:0});await aH.flip(0,aI,{side:'front'});await aH.flip(0,aI,{side:'front'});await Promise.all(aI.cards.concat(aG.cards).concat(aJ.cards).map((a,b)=>new Promise(async c=>{await a.dealTo(aK,{side:'back',delay:b*100+1000});c()})));await aK.animateTo({x:0,y:0});await aL()};!(async()=>{await aE(aK);await aL()})();let aM=io('/');aM.on('hello',()=>{console.log('Hello!')})}()
//# sourceMappingURL=main.js.map
